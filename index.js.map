{"version":3,"file":"index.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["import axios from \"axios\";\n\nexport const getPictures = async (name, currentPage) => {\n    const KEY = '46001925-09c36435a6f5ed4e05a6b9a17';\n  \n     \n    const searchParams = new URLSearchParams({\n      key: KEY,\n        q: name,\n        image_type: \"photo\",\n        orientation: \"horizontal\",\n        safesearch: \"true\",\n        per_page: 15,\n        page: currentPage,\n    });\n\n    const response = await\n        axios.get(`https://pixabay.com/api/?${searchParams}`)\n      return response.data\n};","export function createMarkup(arr) {\n    return arr.map(({ webformatURL, largeImageURL, tags, likes, views, comments, downloads }) =>\n      `<li class=\"gallery-item\">\n            <a class=\"gallery-link\" href=\"${largeImageURL}\">\n              <img\n                class=\"gallery-image\"\n                src=\"${webformatURL}\"\n                alt=\"${tags}\"\n                width=\"360\"\n              />\n            </a>\n            <div class=\"thumb-block\">\n              <div class=\"block\">\n                <h2 class=\"tittle\">Likes</h2>\n                <p class=\"amount\">${likes}</p>\n              </div>\n              <div class=\"block\">\n                <h2 class=\"tittle\">Views</h2>\n                <p class=\"amount\">${views}</p>\n              </div>\n              <div class=\"block\">\n                <h2 class=\"tittle\">Comments</h2>\n                <p class=\"amount\">${comments}</p>\n              </div>\n              <div class=\"block\">\n                <h2 class=\"tittle\">Downloads</h2>\n                <p class=\"amount\">${downloads}</p>\n              </div>\n            </div>\n          </li>`)\n    \n  }","import { getPictures } from \"./js/pixabay-api\";\nimport { createMarkup } from \"./js/render-functions\";\n\nimport iziToast from \"izitoast\";\nimport \"izitoast/dist/css/iziToast.min.css\";\n\nimport SimpleLightbox from \"simplelightbox\";\nimport \"simplelightbox/dist/simple-lightbox.min.css\";\n\nimport axios from 'axios';\n\nconst formSearch = document.querySelector('.js-search');\nconst listImages = document.querySelector('.gallery');\nconst loadBtn = document.querySelector('.load-btn');\n\nconst loader = () => document.querySelector(\"span\").classList.toggle(\"loader\");\n\nconst warn = () => iziToast.show({\n    message: 'Please fill a field',\n    backgroundColor: 'red',\n    color: 'white',\n});\n\nconst mistake = () => iziToast.show({\n    message: 'Sorry, there are no images matching your search query. Please try again!',\n    backgroundColor: 'red',\n    color: 'white',\n});\n\nconst finishHits = () => iziToast.show({\n    message: \"We're sorry, but you've reached the end of search results.\",\n    backgroundColor: \"yellow\",\n    color: \"white\",\n});\n\nconst lightbox = new SimpleLightbox('.gallery a', {\n    captions: true,\n    captionsData: 'alt',\n    captionPosition: 'bottom',\n    captionDelay: 250,\n});\n\nlet userSearch = '';\nlet currentPage = 1;\n\nconst handleImages = async (event) => {\n    event.preventDefault();\n    userSearch = event.currentTarget.elements.search.value.toLowerCase().trim();\n    if (!userSearch) return warn();\n    listImages.innerHTML = \"\";\n    loadBtn.style.display = \"none\";\n    currentPage = 1;\n    loader();\n    try {\n        const json = await getPictures(userSearch, currentPage);\n        if (!json.hits.length) return mistake();\n        listImages.insertAdjacentHTML('beforeend', createMarkup(json.hits).join(''));\n        lightbox.refresh();\n        currentPage++;\n        loadBtn.style.display = json.totalHits > json.hits.length ? \"block\" : \"none\";\n    }\n    catch (error) {\n        console.log(error);\n    }\n    finally {\n        loader();\n        formSearch.reset();\n    };\n};\n\nconst loadImages = async (event) => {\n    if (!userSearch) return warn();\n    loader();\n    try {\n        const json = await getPictures(userSearch, currentPage);\n        listImages.insertAdjacentHTML('beforeend', createMarkup(json.hits).join(''));\n        currentPage++;\n        lightbox.refresh();\n        window.scrollBy({\n            top: 200 * 2,\n            behavior: \"smooth\",\n        });\n        if (listImages.children.length >= json.totalHits) {\n            loadBtn.style.display = \"none\";\n            return finishHits();\n        } else {\n            loadBtn.style.display = \"block\";\n        }\n            \n    }\n    catch (error) {\n        console.log(error);\n    }\n    finally {\n        loader();\n    };\n};\n\nformSearch.addEventListener('submit', handleImages);\nloadBtn.addEventListener('click', loadImages);"],"names":["getPictures","name","currentPage","KEY","searchParams","axios","createMarkup","arr","webformatURL","largeImageURL","tags","likes","views","comments","downloads","formSearch","listImages","loadBtn","loader","warn","iziToast","mistake","finishHits","lightbox","SimpleLightbox","userSearch","handleImages","event","json","error","loadImages"],"mappings":"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"}